[project]
name = "files-api-cdk"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
authors = [{ name = "avr2002", email = "avr13405@gmail.com" }]
requires-python = ">=3.12"
dependencies = ["aws-cdk-lib==2.186.0", "constructs>=10.0.0,<11.0.0"]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"


[tool.poe.executor]
type = "uv"

[tool.poe.env]
AWS_PROFILE = "sbox"
AWS_REGION = "us-east-1"
AWS_DEFAULT_REGION = "us-east-1"

[tool.poe.tasks.deploy]
help = "Deploy the CDK stack"
shell = """/bin/bash ./run deploy"""

[tool.poe.tasks.destroy]
help = "Destroy the CDK stack"
shell = """./run destroy"""

[tool.poe.tasks.bootstrap]
help = "Bootstrap the CDK environment"
shell = """./run bootstrap"""

[tool.poe.tasks.clean]
help = "Remove all files generated by tests, builds, or operating this codebase"
shell = """
rm -rf dist build coverage.xml test-reports sample/ tests/artifacts/

find . \\
    -type d \\
    \\( \\
    -name "*cache*" \\
    -o -name "tests/artifacts" \\
    -o -name "*.dist-info" \\
    -o -name "*.egg-info" \\
    -o -name "*htmlcov" \\
    -o -name "*.metaflow" \\
    -o -name "*.metaflow.s3" \\
    -o -name "*.mypy_cache" \\
    -o -name "*.pytest_cache" \\
    -o -name "*.ruff_cache" \\
    -o -name "*__pycache__" \\
    \\) \\
    -not -path "*env/*" \\
    -exec rm -r {} + || true

find . \\
    -type f \\
    -name "*.pyc" \\
    -o -name "*.DS_Store" \\
    -o -name "*.coverage*" \\
    -not -path "*env/*" \\
    -exec rm {} +
"""
